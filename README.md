# 剪映字幕优化工具

这是一个用于处理 .srt 格式字幕文件的 Python 脚本。它可以根据用户的需求，使用 Dify API 来优化字幕内容或生成双语字幕。

## 功能

- 读取 .srt 格式的字幕文件
- 使用 Dify API 处理字幕内容
- 支持单语字幕优化和双语字幕生成
- 生成新的 .srt 文件，包含处理后的字幕内容

## 使用方法

1. 确保您的系统已安装 Python 3.x。

2. 安装必要的依赖：
   ```
   pip install requests
   ```

3. 在命令行中运行脚本，使用以下格式：
   ```
   python run.py <文件路径> <文稿主题> <bilingual>
   ```
   
   参数说明：
   - `<文件路径>`: 要处理的 .srt 文件的路径
   - `<文稿主题>`: 字幕内容的主题或标题
   - `<bilingual>`: 输入 'true' 使用双语字幕模式，其他输入使用默认模式

   例如：
   ```
   python run.py ./demo/test1.srt "视频标题" true
   ```

4. 脚本将在原始文件的同一目录下生成一个新的 .srt 文件，文件名格式为 "原文件名.new.srt"。

## 注意事项

- 确保您有有效的 Dify API 密钥，并正确设置在脚本中的 `DIFY_API_KEY1` 和 `DIFY_API_KEY2` 变量。
- 处理大文件可能需要较长时间，请耐心等待。
- 脚本默认使用 UTF-8 编码读取和写入文件。如果遇到编码问题，请检查原始字幕文件的编码。
- 双语字幕模式会调用两次 API，可能会增加处理时间和 API 使用量。

## 错误处理

脚本包含基本的错误处理机制，如果遇到问题，将显示相应的错误信息。常见的错误包括：
- 文件不存在
- 文件格式不正确（非 .srt 文件）
- API 调用失败
- 文件编码问题

如果遇到其他问题，请检查您的输入参数和网络连接，或联系开发者寻求帮助。

## 贡献

欢迎提交 issues 或 pull requests 来改进这个项目。

## 许可

[在此处添加您的许可信息]